// This file was generated by SquareLine Studio
// SquareLine Studio version: SquareLine Studio 1.3.2
// LVGL version: 8.3.6
// Project name: SquareLine_Project

#include "ui.h"
#include "utils.h"

lv_obj_t *wifiname_list_btn;
lv_obj_t *ui_wifi_icon;

void play_music_function(lv_event_t *e)
{
    rt_kprintf("play_music_function\n");
//    wavplayer_pause();
}

void pause_music_function(lv_event_t *e)
{
    rt_kprintf("pause_music_function\n");
//    wavplayer_resume();
}

void switch_player1_func(lv_event_t *e)
{
    // Your code here
//    wavplayer_play("music/song1.wav");
}

void switch_player2_func(lv_event_t *e)
{
    // Your code here
//    wavplayer_play("music/song2.wav");
}

void backlight_slider_event_cb(lv_event_t *e)
{
    // Your code here
    lv_obj_t *slider = lv_event_get_target(e);
    int val = (int)lv_slider_get_value(slider);
    backlight_setvalue(val * 100);
}

void voice_slider_event_cb(lv_event_t *e)
{
    // Your code here
    lv_obj_t *slider = lv_event_get_target(e);
    int val = (int)lv_slider_get_value(slider);
    wavplayer_volume_set(val);
}

void shutdown_music(lv_event_t *e)
{
    // Your code here
//    char *music_name = wavplayer_uri_get();
//    wavplayer_pause();
//    wavplayer_stop();
}

lv_timer_t *net_timer;

void wifi_timer(lv_timer_t *timer)
{
    if (rt_wlan_is_connected() == RT_TRUE)
    {
        rt_kprintf("conn:%s\n", Wifi_InfoS[wifi_index].ssid);
        leftoff_Animation(ui_wifi_Spinner, 200);
        _ui_flag_modify(ui_wifi_Spinner, LV_OBJ_FLAG_HIDDEN, _UI_MODIFY_FLAG_ADD);
        lv_img_set_src(ui_wlan_image,  &ui_img_ok_big_png);
        _ui_screen_change(&ui_mqtt_Setting, LV_SCR_LOAD_ANIM_FADE_ON, 200, 400, &ui_mqtt_Setting_screen_init);

        lv_timer_del(net_timer);
    }
}

void connect_wifi_event(lv_event_t *e)
{
    // Your code here
    const char *text = lv_textarea_get_text(ui_wifiTextArea);
    char *wifi_password = rt_strdup(text);
    if (rt_strlen(text) > 0)
    {
        rt_strncpy(Wifi_InfoS[wifi_index].password, wifi_password, rt_strlen(wifi_password));
        WiFi_Join(Wifi_InfoS[wifi_index].ssid, Wifi_InfoS[wifi_index].password);
        net_timer = lv_timer_create(wifi_timer, 1000, NULL);
        rt_free(wifi_password);
    }
}

void move_video_panel_to_left(lv_event_t *e)
{
    // Your code here
}

void save_alarm_parameter(lv_event_t *e)
{
    // Your code here
    char buf1[32], buf2[32];
    lv_roller_get_selected_str(ui_temp_roller, buf1, sizeof(buf1));
    lv_roller_get_selected_str(ui_humi_roller, buf2, sizeof(buf2));

    rt_kprintf("%s  %s\n", buf1, buf2);
}

void scan_wifi_func(lv_event_t *e)
{
    // Your code here
    WiFi_Scan();
}

rt_bool_t scale_flag = RT_FALSE;
void zoom_window(lv_event_t *e)
{
    // Your code here
    lv_event_code_t event_code = lv_event_get_code(e);
    if (event_code == LV_EVENT_PRESSED)
    {
        scale_flag = !scale_flag;
        if (scale_flag == RT_TRUE)
            scalewin_Animation2(ui_Setting_Pannel, 0, -40);
        else
            scalewin_Animation2(ui_Setting_Pannel, 0, 40);
    }
}

void set_mqtt_param_func(lv_event_t *e)
{
    // Your code here
    lv_label_get_text(ui_subscript_text);
    lv_label_get_text(ui_puliish_text);
    lv_label_get_text(ui_clintid_text);
    lv_label_get_text(ui_username_text);
    lv_label_get_text(ui_password_text);
    lv_label_get_text(ui_port_text);
}

void get_keyboard_value(lv_event_t *e)
{
    // Your code here
    uint16_t kbs = lv_keyboard_get_selected_btn(ui_Keyboard2);
    const char *key = lv_keyboard_get_btn_text(ui_Keyboard2, kbs);
    if (key == NULL)
        return;

    if (kbs == 0x27 || kbs == 0x23)
        _ui_flag_modify(ui_Keyboard2, LV_OBJ_FLAG_HIDDEN, _UI_MODIFY_FLAG_ADD);
}

void show_text_sync(lv_event_t * e)
{
	// Your code here
    lv_obj_t *obj = lv_event_get_target(e);

    lv_textarea_set_text(ui_info_text, lv_textarea_get_text(obj));
}
